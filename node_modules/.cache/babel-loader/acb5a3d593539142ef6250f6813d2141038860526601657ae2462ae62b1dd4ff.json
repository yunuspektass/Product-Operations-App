{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport Vue from \"vue\";\nimport { router } from \"@/router\";\nconst state = {\n  products: []\n};\nconst getters = {\n  getProducts(state) {\n    return state.products;\n  },\n  getProduct(state) {\n    return key => state.products.filter(element => {\n      return element.key == key;\n    });\n  }\n};\nconst mutations = {\n  updateProductList(state, product) {\n    state.products.push(product);\n  }\n};\nconst actions = {\n  initApp({\n    commit\n  }) {\n    Vue.http.get(\"https://product-operations-bbe6e-default-rtdb.firebaseio.com/product.json\").then(response => {\n      let data = response.body;\n      for (let key in data) {\n        data[key].key = key;\n        commit(\"updateProductList\", data[key]);\n      }\n    });\n  },\n  saveProduct({\n    dispatch,\n    commit,\n    state\n  }, product) {\n    Vue.http.post(\"https://product-operations-bbe6e-default-rtdb.firebaseio.com/product.json\", product).then(response => {\n      // Ürün listesinim güncellenmesi\n      product.key = response.body.name;\n      commit(\"updateProductList\", product);\n      // Alış , satış bakiye, bilgilerinin güncellenmesi\n      let tradeResult = {\n        purchase: product.price,\n        sale: 0,\n        count: product.count\n      };\n      dispatch(\"setTradeResult\", tradeResult);\n      router.replace(\"/\");\n    });\n  },\n  sellProduct({\n    state,\n    commit\n  }, payload) {\n    let product = state.products.filter(element => {\n      return element.key == payload.key;\n    });\n    if (product) {\n      let totalCount = product[0].count - payload.count;\n      Vue.http.patch(\"https://product-operations-bbe6e-default-rtdb.firebaseio.com/product/\" + payload.key + \".json\", {\n        count: totalCount\n      }).then(response => {\n        product[0].count = totalCount;\n        let tradeResult = {\n          purchase: product.price,\n          sale: 0,\n          count: product.count\n        };\n        dispatch(\"setTradeResult\", tradeResult);\n        router.replace(\"/\");\n      });\n    }\n  }\n};\nexport default {\n  state,\n  getters,\n  mutations,\n  actions\n};","map":{"version":3,"names":["Vue","router","state","products","getters","getProducts","getProduct","key","filter","element","mutations","updateProductList","product","push","actions","initApp","commit","http","get","then","response","data","body","saveProduct","dispatch","post","name","tradeResult","purchase","price","sale","count","replace","sellProduct","payload","totalCount","patch"],"sources":["/Users/yunuspektas/Desktop/VueJS/product-operations-app/src/store/modules/product.js"],"sourcesContent":["import Vue from \"vue\";\nimport { router} from \"@/router\";\n\nconst state = {\n  products: []\n}\n\nconst getters = {\n  getProducts(state) {\n    return state.products;\n  },\n  getProduct(state) {\n    return key => state.products.filter(element => {\n      return element.key == key;\n    })\n  }\n}\n\nconst mutations = {\n  updateProductList(state, product) {\n    state.products.push(product)\n  }\n}\n\n\nconst actions = {\n  initApp({ commit }){\n   Vue.http.get(\"https://product-operations-bbe6e-default-rtdb.firebaseio.com/product.json\")\n     .then((response) => {\n      let data = response.body;\n      for (let key in data) {\n        data[key].key = key;\n        commit(\"updateProductList\", data[key])\n      }\n     })\n\n\n  },\n  saveProduct({ dispatch,commit , state} , product) {\n   Vue.http.post(\"https://product-operations-bbe6e-default-rtdb.firebaseio.com/product.json\",product)\n     .then((response) => {\n       // Ürün listesinim güncellenmesi\n       product.key = response.body.name;\n       commit(\"updateProductList\", product);\n     // Alış , satış bakiye, bilgilerinin güncellenmesi\n       let tradeResult = {\n         purchase: product.price,\n         sale : 0  ,\n         count : product.count,\n       }\n       dispatch(\"setTradeResult\",tradeResult)\n       router.replace(\"/\")\n     })\n  },\n  sellProduct({ state , commit }, payload) {\n    let product = state.products.filter(element => {\n      return element.key == payload.key})\n\n    if (product){\n      let totalCount = product[0].count - payload.count\n\n      Vue.http.patch(\"https://product-operations-bbe6e-default-rtdb.firebaseio.com/product/\"+payload.key+\".json\", {count : totalCount})\n        .then((response) => {\n          product[0].count = totalCount;\n          let tradeResult = {\n            purchase: product.price,\n            sale : 0  ,\n            count : product.count,\n          }\n          dispatch(\"setTradeResult\",tradeResult)\n          router.replace(\"/\")\n        })\n    }\n\n  }\n}\n\n\nexport default {\n  state,\n  getters,\n  mutations,\n  actions\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}